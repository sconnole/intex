## this is the skeleton of all pages on in this app - it defines the basic html tags

<!DOCTYPE html>
<html>
    <meta charset="UTF-8">
    <head>
        <link rel="icon" href="${STATIC_URL}homepage/media/favicon.ico" type="image/x-icon" />
        <title>Intex &mdash; <%block name="title"></%block></title>

        ## add any site-wide scripts or CSS here; for example, jquery:
        <link rel="stylesheet" href="${STATIC_URL}homepage/media/bootstrap.min.css">
        <script src="${STATIC_URL}homepage/media/jquery-3.3.1.js"></script>
        <script src="${STATIC_URL}homepage/media/bootstrap.min.js"></script>

        ## render the static file links with the same name as this template
        <script src="/django_mako_plus/dmp-common.min.js"></script>
        ${ django_mako_plus.links(self) } 
    </head>
    <body>
        <div class="alertContainer header_maintainence" id="alert">
            <div class="alert danger"><%block name="dangerText">This is a danger alert!</%block></div>
            <div class="alert info"><%block name="infoText">This is an info alert!</%block></div>
            <div class="alert success"><%block name="successText">This is a succesful alert!</%block></div>
            <div class="alert warning"><%block name="warningText">This is a warning!</%block></div>
        </div>
        <header id="header">
            <nav class="navbar navbar-expand-lg">
                <a href="/"><img src="${ STATIC_URL }homepage/media/python.png" alt="python" /></a>
                ##Override the menu when needed
                <%block name="menu">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span> 
                    </button>
                    <div class="dropdown collapse navbar-collapse" id="myNavbar">        
                        <ul class="nav navbar-nav">
                            <li><a class="dropdown-item nav-link ${'active' if request.dmp.page == 'index' else ''}" href="/">Home</a></li>
                            <li><a class="dropdown-item nav-link ${'active' if request.dmp.page == 'contact' else ''}" href="/homepage/contact">Contact</a></li>
                            <li><a class="dropdown-item nav-link ${'active' if request.dmp.page == 'about' else ''}" href="/homepage/about">About</a></li>
                            <li><a class="dropdown-item nav-link" href="/catalog/index/">Catalog</a></li>
                        </ul>
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Welcome${',' if user.username != '' else ''} ${user.username}
                        </button>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            % if user.is_authenticated: 
                                <a class="dropdown-item nav-link" href="/account/logout">Logout</a>
                                <a class="dropdown-item nav-link" href="/catalog/cart">Cart</a>
                                <a class="dropdown-item nav-link" href="/account/preferences">Account</a>
                            % else: 
                                <a class="dropdown-item nav-link" href="/account/login">Login</a>
                            % endif
                        </div>
                    </div>        
                </%block>
            </nav>
        </header>

        <main>
            <div id="site_left">
                <%block name="site_left">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link ${'active' if request.dmp.page == 'index' else ''}" href="/homepage/index">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link ${'active' if request.dmp.page == 'contact' else ''}" href="/homepage/contact">Contact</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link ${'active' if request.dmp.page == 'about' else ''}" href="/homepage/about">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link ${'active' if request.dmp.page == '' else ''}" href="/catalog/index">Catalog</a>
                        </li>
                    </ul>
                </%block>
            </div>
            <div id="site_center">
                <%block name="site_center">
                    
                </%block>
            </div>
            <div id="site_right">
                <%block name="site_right">
                    
                </%block>
            </div>
        </main>

         <%! from datetime import datetime %>
        <footer>
            &copy; Copyright ${datetime.now().year}
        </footer>

    </body>
</html>
